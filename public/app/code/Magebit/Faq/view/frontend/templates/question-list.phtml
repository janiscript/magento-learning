<?php
/**
 * @category Magebit
 * @package Magebit_Faq
 * @author Magebit Team
 * @copyright Copyright (c) 2024 Magebit (https://magebit.com/)
 * @var \Magebit\Faq\Block\QuestionList $block
 */

$questions = $block->getQuestions();
?>

<?php if (count($questions)): ?>
    <div class="faq-questions" data-mage-init='{"accordion":{"openedState":"active","collapsible":true,"active":false,"multipleCollapsible":false}}'>
        <?php foreach ($questions as $question): ?>
            <?php
            $questionId = $block->getAccordionId($question);
            $questionText = $block->escapeHtml($question->getQuestion());
            $answerText = $block->escapeHtml($question->getAnswer());
            ?>
            <div data-role="collapsible" class="faq-item">
                <div data-role="trigger" class="faq-question" id="<?= $block->escapeHtmlAttr($questionId) ?>">
                    <h3 class="faq-question-title">
                        <?= $questionText ?>
                    </h3>
                </div>
                <div data-role="content" class="faq-answer" aria-labelledby="<?= $block->escapeHtmlAttr($questionId) ?>">
                    <div class="faq-answer-content">
                        <?= nl2br($answerText) ?>
                    </div>
                </div>
            </div>
        <?php endforeach; ?>
    </div>
<?php else: ?>
    <div class="message info empty">
        <div><?= $block->escapeHtml(__('No questions available at this time.')) ?></div>
    </div>
<?php endif; ?>
